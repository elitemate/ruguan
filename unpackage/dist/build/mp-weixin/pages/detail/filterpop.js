(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/filterpop"],{"0193":function(t,e,a){"use strict";a.r(e);var o=a("247f"),i=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"247f":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){a.e("components/simple-pro/customModal").then(function(){return resolve(a("c91c"))}.bind(null,a)).catch(a.oe)},i={onShareAppMessage:function(t){return{title:this.goods.itemtitle,path:"/pages/detail/goodsinfo?itemid="+this.itemid}},data:function(){return{buyDes:"口令购买",collect:{name:"收藏",isCollect:""},show_share:!1,itemid:"",loadGoods:!0,goods:{},taoBaoBuy:!0,shopCartBg:!1,filterButton:!0,scrollTop:!1,couponlist:[],navBarButton:!1,copyTklStatus:!1,save:!1,tkl:"",relation_id:null,money:0,showFollow:!1,isWeiXin:!1,footprintKey:"orange-sqx-footprint",collectKey:"orange-sqx-collect",poster:{},qrShow:!1,canvasId:"default_PosterCanvasId"}},components:{simpleModal:o},onShow:function(){this.copyTklStatus=!1},onLoad:function(e){var a=this;if(e.itemid){this.itemid=e.itemid,this.loadGoodsInfo(),this.$queue.getData("openid")&&this.$Request.get("/tao/wx/follow/"+this.$queue.getData("openid")).then((function(t){a.showFollow=500!==t.status&&!0!==t}));var o=this.$queue.getData("userId");o||this.$Request.getT("/user/"+o).then((function(t){0===t.status&&(a.$queue.setData("openid",t.data.openId),a.$queue.setData("image_url",t.data.image_url),a.$queue.setData("mobile",t.data.phone),a.$queue.setData("nickName",t.data.nickName),a.$queue.setData("relation_id",t.data.relationId),a.$queue.setData("gender",parseInt(t.data.gender)))}))}else t.navigateBack()},onPageScroll:function(t){this.scrollTop=t.scrollTop>200},onNavigationBarButtonTap:function(){this.navBarButton=!this.navBarButton},methods:{loadGoodsInfo:function(){var e=this,a=this;t.showLoading({title:"加载中..."}),this.$Request.get("/item_detail/apikey/maxd/itemid/"+this.itemid).then((function(o){if(1===o.code){if(o.data.taobao_image&&o.data.taobao_image.length>0){var i=o.data.taobao_image.split(",");o.data.images=[];for(var s=0;s<i.length;s++)o.data.images.push(i[s])}else o.data.images=[],o.data.images.push(o.data.itempic);o.data.start_time&&o.data.end_time&&(o.data.start_time=e.formatDate(new Date(1e3*o.data.start_time)),o.data.end_time=e.formatDate(new Date(1e3*o.data.end_time))),o.data.itemsale=o.data.itemsale>1e4?(o.data.itemsale/1e4).toFixed(1)+"万":o.data.itemsale,a.goods=o.data,a.loadGoods=!0,a.money=(o.data.tkmoney/2).toFixed(2);try{var n=e.$queue.isExist(e.collectKey,o.data.itemid);!0===n?(e.collect.name="已收藏",e.collect.isCollect="color: #e10a07"):(e.collect.name="收藏",e.collect.isCollect=!1);var l=e.$queue.isExist(e.footprintKey,o.data.itemid);!1===l&&e.$queue.insert({key:e.footprintKey,value:e.goods}),e.$queue.setData("itempic",o.data.itempic),e.$queue.setData("itemtitle",o.data.itemtitle),e.$queue.setData("itemprice",o.data.itemprice),e.$queue.setData("itemendprice",o.data.itemendprice),e.buyDes="分享给朋友",e.loadTkl()}catch(u){console.log(u)}}else t.navigateBack();t.hideLoading()})),this.$Request.get("/get_similar_info/apikey/maxd/itemid/"+this.itemid).then((function(t){1===t.code&&t.data.forEach((function(t){t.tkmoney=(t.tkmoney/2).toFixed(2),t.itemsale=t.itemsale>1e4?"已售 "+(t.itemsale/1e4).toFixed(1)+"万":"已售 "+t.itemsale,e.couponlist.push(t)}))}))},goPublisher:function(){t.navigateTo({url:"/pages/member/publisher"})},toSave:function(e){t.getImageInfo({src:e,success:function(e){console.log("图片信息：",JSON.stringify(e)),t.saveImageToPhotosAlbum({filePath:e.path,success:function(){console.log("save success"),t.showToast({title:"图片保存成功",icon:"none",duration:3e3})}})}})},goBackUp:function(){t.navigateBack()},closeShare:function(){this.show_share=!1},clickCollect:function(){var t=this.$queue.isExist(this.collectKey,this.goods.itemid);if(t){var e=[];e.push(this.goods.itemid),this.$queue.removeItem(this.collectKey,e),this.collect.name="收藏",this.collect.isCollect=""}else this.$queue.insert({key:this.collectKey,value:this.goods}),this.collect.name="已收藏",this.collect.isCollect="color: #e10a07"},getQuan:function(){t.showLoading({title:"加载中..."});var e=this;this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(t){1===t.code&&e.shopCartShare("tttt")}))},getTkl:function(e){var a=this,o=this,i=o.$queue.getData("relation_id");this.tkl?("tkl"===e&&"tklbuy"!==e?this.$refs.simpleModalTkl.show({showConfirmButton:!1}):"tttt"===e?this.$refs.simpleModalTklBuy.show({showConfirmButton:!1}):"copy"===e?o.copyTkl():i?this.$refs.simpleModalTkl.show({showConfirmButton:!1}):this.$refs.simpleModalTklBuy.show({showConfirmButton:!1}),t.hideLoading()):(t.showLoading({title:"加载中..."}),this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(s){1===s.code?a.$Request.postF("/taobao/tbwd",{appKey:a.$queue.getTaoBaoAppid(),appSecret:a.$queue.getTaoBaoSecret(),logo:a.goods.itempic,text:a.goods.itemtitle,url:s.data.coupon_click_url}).then((function(s){s&&s.tbk_tpwd_create_response.data.model&&(a.tkl=s.tbk_tpwd_create_response.data.model,"tkl"===e&&"tklbuy"!==e?a.$refs.simpleModalTkl.show({showConfirmButton:!1}):"tttt"===e?a.$refs.simpleModalTklBuy.show({showConfirmButton:!1}):"copy"===e?o.copyTkl():"save"===e||(i?a.$refs.simpleModalTkl.show({showConfirmButton:!1}):a.$refs.simpleModalTklBuy.show({showConfirmButton:!1}))),t.hideLoading()})):t.hideLoading()})))},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return e+"-"+a+"-"+o},loadTkl:function(){var t=this;this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(e){1===e.code&&t.$Request.postF("/taobao/tbwd",{appKey:t.$queue.getTaoBaoAppid(),appSecret:t.$queue.getTaoBaoSecret(),logo:t.goods.itempic,text:t.goods.itemtitle,url:e.data.coupon_click_url}).then((function(e){e&&e.tbk_tpwd_create_response.data.model&&(t.tkl=e.tbk_tpwd_create_response.data.model)}))}))},copyTkl:function(){t.setClipboardData({data:this.tkl,success:function(e){t.showToast({title:"复制成功",duration:1500})}})},moveHandleStop:function(){console.log("111")},showShopCartBg:function(t){"cart"===t&&(this.shopCartBg=!this.shopCartBg),"nav"===t&&(this.navBarButton=!this.navBarButton),"filter"===t&&(this.filterButton=!this.filterButton)},topScrollTap:function(){t.pageScrollTo({scrollTop:0,duration:300})},navBarButtontO:function(e){"search"===e?t.switchTab({url:"/pages/homeSearch/index"}):"like"===e?t.switchTab({url:"/pages/member/user"}):"footer"===e?t.navigateTo({url:"/pages/footer/index"}):"home"===e&&t.switchTab({url:"/pages/index/index"})},shopCartShare:function(e){if("tkl"===e)this.copyTklStatus=!1,this.getTkl(e);else if("tklbuy"===e){var a=this.$queue.getData("relation_id");if(a)this.copyTklStatus=!1,this.getTkl(e);else{this.$queue.setData("href","/pages/detail/goodsinfo?itemid="+this.itemid);var o=this.$queue.getData("token"),i=this.$queue.getData("userId");o?t.navigateTo({url:"/pages/member/publisher?uid="+i+"&token="+o}):t.navigateTo({url:"/pages/public/login"})}}else"showPic"===e?(this.copyTklStatus=!1,this.$refs.simpleModalTkl.show({showConfirmButton:!1})):"quan"===e?this.getQuan():(this.copyTklStatus=!1,this.getTkl(e))},shopCartShares:function(t){"tklbuy"===t?(this.copyTklStatus=!1,this.getTkl(t)):"quan"===t&&this.getQuan()},TklmaskClose:function(t){this.$refs.simpleModalTkl.hide(),this.copyTklStatus=!1},copyTklWenAn:function(){var e=this;t.setClipboardData({data:"椱ァ製这段文字，打开【◇綯℡寳】即可领券购买。$"+this.tkl,success:function(t){e.copyTklStatus=!0}})},copyTklWenAns:function(){var e=this;this.$queue.getData("relation_id");t.setClipboardData({data:this.goods.itemtitle+"\n【在售价】"+this.goods.itemprice+"元\n【券后价】"+this.goods.itemendprice+"元\n【必买理由】\n"+this.goods.itemdesc+"+\n$"+this.tkl+"椱ァ製此信息进入【◇綯℡寳】即可查看并下单\n",success:function(t){e.copyTklStatus=!0}})},TklBuymaskClose:function(){this.$refs.simpleModalTklBuy.hide(),this.copyTklStatus=!1},hideQr:function(){this.qrShow=!1}}};e.default=i}).call(this,a("543d")["default"])},"35af":function(t,e,a){"use strict";var o=a("a03c"),i=a.n(o);i.a},"5cdd":function(t,e,a){"use strict";a.r(e);var o=a("a9c4"),i=a("0193");for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("35af");var n,l=a("f0c5"),u=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],n);e["default"]=u.exports},a03c:function(t,e,a){},a1a2:function(t,e,a){"use strict";(function(t){a("fd83");o(a("66fd"));var e=o(a("5cdd"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},a9c4:function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},s=[]}},[["a1a2","common/runtime","common/vendor"]]]);