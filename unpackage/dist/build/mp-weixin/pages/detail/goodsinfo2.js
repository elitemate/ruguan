(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/goodsinfo2"],{"148c":function(t,e,o){"use strict";var a=o("2c7b"),i=o.n(a);i.a},"2bed":function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"2c7b":function(t,e,o){},4195:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){o.e("components/simple-pro/customModal").then(function(){return resolve(o("c91c"))}.bind(null,o)).catch(o.oe)},i={onShareAppMessage:function(t){return{title:this.goods.itemtitle,path:"/pages/detail/goodsinfo?itemid="+this.itemid}},data:function(){return{buyDes:"口令购买",collect:{name:"收藏",isCollect:""},show_share:!1,itemid:"",loadGoods:!0,goods:{},taoBaoBuy:!0,shopCartBg:!0,filterButton:!0,scrollTop:!1,couponlist:[],navBarButton:!1,copyTklStatus:!1,save:!1,tkl:"",relation_id:null,money:0,showFollow:!1,isWeiXin:!1,footprintKey:"orange-sqx-footprint",collectKey:"orange-sqx-collect",poster:{},qrShow:!1,canvasId:"default_PosterCanvasId"}},components:{simpleModal:a},onShow:function(){this.copyTklStatus=!1},onLoad:function(e){var o=this;if(e.itemid){this.itemid=e.itemid,this.loadGoodsInfo(),this.$queue.getData("openid")&&this.$Request.get("/tao/wx/follow/"+this.$queue.getData("openid")).then((function(t){o.showFollow=500!==t.status&&!0!==t}));var a=this.$queue.getData("userId");a||this.$Request.getT("/user/"+a).then((function(t){0===t.status&&(o.$queue.setData("openid",t.data.openId),o.$queue.setData("image_url",t.data.image_url),o.$queue.setData("mobile",t.data.phone),o.$queue.setData("nickName",t.data.nickName),o.$queue.setData("relation_id",t.data.relationId),o.$queue.setData("gender",parseInt(t.data.gender)))}))}else t.navigateBack()},onPageScroll:function(t){this.scrollTop=t.scrollTop>200},onNavigationBarButtonTap:function(){this.navBarButton=!this.navBarButton},methods:{loadGoodsInfo:function(){var e=this,o=this;t.showLoading({title:"加载中..."}),this.$Request.get("/item_detail/apikey/maxd/itemid/"+this.itemid).then((function(a){if(1===a.code){if(a.data.taobao_image&&a.data.taobao_image.length>0){var i=a.data.taobao_image.split(",");a.data.images=[];for(var s=0;s<i.length;s++)a.data.images.push(i[s])}else a.data.images=[],a.data.images.push(a.data.itempic);a.data.start_time&&a.data.end_time&&(a.data.start_time=e.formatDate(new Date(1e3*a.data.start_time)),a.data.end_time=e.formatDate(new Date(1e3*a.data.end_time))),a.data.itemsale=a.data.itemsale>1e4?(a.data.itemsale/1e4).toFixed(1)+"万":a.data.itemsale,o.goods=a.data,o.loadGoods=!0,o.money=(a.data.tkmoney/2).toFixed(2);try{var n=e.$queue.isExist(e.collectKey,a.data.itemid);!0===n?(e.collect.name="已收藏",e.collect.isCollect="color: #e10a07"):(e.collect.name="收藏",e.collect.isCollect=!1);var u=e.$queue.isExist(e.footprintKey,a.data.itemid);!1===u&&e.$queue.insert({key:e.footprintKey,value:e.goods}),e.$queue.setData("itempic",a.data.itempic),e.$queue.setData("itemtitle",a.data.itemtitle),e.$queue.setData("itemprice",a.data.itemprice),e.$queue.setData("itemendprice",a.data.itemendprice),e.buyDes="分享给朋友",e.loadTkl()}catch(l){console.log(l)}}else t.navigateBack();t.hideLoading()})),this.$Request.get("/get_similar_info/apikey/maxd/itemid/"+this.itemid).then((function(t){1===t.code&&t.data.forEach((function(t){t.tkmoney=(t.tkmoney/2).toFixed(2),t.itemsale=t.itemsale>1e4?"已售 "+(t.itemsale/1e4).toFixed(1)+"万":"已售 "+t.itemsale,e.couponlist.push(t)}))}))},goPublisher:function(){t.navigateTo({url:"/pages/member/publisher"})},toSave:function(e){t.getImageInfo({src:e,success:function(e){console.log("图片信息：",JSON.stringify(e)),t.saveImageToPhotosAlbum({filePath:e.path,success:function(){console.log("save success"),t.showToast({title:"图片保存成功",icon:"none",duration:3e3})}})}})},goBackUp:function(){t.navigateBack()},closeShare:function(){this.show_share=!1},clickCollect:function(){var t=this.$queue.isExist(this.collectKey,this.goods.itemid);if(t){var e=[];e.push(this.goods.itemid),this.$queue.removeItem(this.collectKey,e),this.collect.name="收藏",this.collect.isCollect=""}else this.$queue.insert({key:this.collectKey,value:this.goods}),this.collect.name="已收藏",this.collect.isCollect="color: #e10a07"},getQuan:function(){t.showLoading({title:"加载中..."});var e=this;this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(t){1===t.code&&e.shopCartShare("tttt")}))},getTkl:function(e){var o=this,a=this,i=a.$queue.getData("relation_id");this.tkl?("tkl"===e&&"tklbuy"!==e?this.$refs.simpleModalTkl.show({showConfirmButton:!1}):"tttt"===e?this.$refs.simpleModalTklBuy.show({showConfirmButton:!1}):"copy"===e?a.copyTkl():i?this.$refs.simpleModalTkl.show({showConfirmButton:!1}):this.$refs.simpleModalTklBuy.show({showConfirmButton:!1}),t.hideLoading()):(t.showLoading({title:"加载中..."}),this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(s){1===s.code?o.$Request.postF("/taobao/tbwd",{appKey:o.$queue.getTaoBaoAppid(),appSecret:o.$queue.getTaoBaoSecret(),logo:o.goods.itempic,text:o.goods.itemtitle,url:s.data.coupon_click_url}).then((function(s){s&&s.tbk_tpwd_create_response.data.model&&(o.tkl=s.tbk_tpwd_create_response.data.model,"tkl"===e&&"tklbuy"!==e?o.$refs.simpleModalTkl.show({showConfirmButton:!1}):"tttt"===e?o.$refs.simpleModalTklBuy.show({showConfirmButton:!1}):"copy"===e?a.copyTkl():"save"===e||(i?o.$refs.simpleModalTkl.show({showConfirmButton:!1}):o.$refs.simpleModalTklBuy.show({showConfirmButton:!1}))),t.hideLoading()})):t.hideLoading()})))},formatDate:function(t){var e=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();return e+"-"+o+"-"+a},loadTkl:function(){var t=this;this.$Request.post("/ratesurl",{itemid:this.itemid,tb_name:this.$queue.getTaoBaoName(),pid:this.$queue.getTaoBaoPid(),apikey:this.$queue.getTaoBaoKey()}).then((function(e){1===e.code&&t.$Request.postF("/taobao/tbwd",{appKey:t.$queue.getTaoBaoAppid(),appSecret:t.$queue.getTaoBaoSecret(),logo:t.goods.itempic,text:t.goods.itemtitle,url:e.data.coupon_click_url}).then((function(e){e&&e.tbk_tpwd_create_response.data.model&&(t.tkl=e.tbk_tpwd_create_response.data.model)}))}))},copyTkl:function(){t.setClipboardData({data:this.tkl,success:function(e){t.showToast({title:"复制成功",duration:1500})}})},moveHandleStop:function(){console.log("111")},showShopCartBg:function(t){"cart"===t&&(this.shopCartBg=!this.shopCartBg),"nav"===t&&(this.navBarButton=!this.navBarButton),"filter"===t&&(this.filterButton=!this.filterButton)},topScrollTap:function(){t.pageScrollTo({scrollTop:0,duration:300})},navBarButtontO:function(e){"search"===e?t.switchTab({url:"/pages/homeSearch/index"}):"like"===e?t.switchTab({url:"/pages/member/user"}):"footer"===e?t.navigateTo({url:"/pages/footer/index"}):"home"===e&&t.switchTab({url:"/pages/index/index"})},shopCartShare:function(e){if("tkl"===e)this.copyTklStatus=!1,this.getTkl(e);else if("tklbuy"===e){var o=this.$queue.getData("relation_id");if(o)this.copyTklStatus=!1,this.getTkl(e);else{this.$queue.setData("href","/pages/detail/goodsinfo?itemid="+this.itemid);var a=this.$queue.getData("token"),i=this.$queue.getData("userId");a?t.navigateTo({url:"/pages/member/publisher?uid="+i+"&token="+a}):t.navigateTo({url:"/pages/public/login"})}}else"showPic"===e?(this.copyTklStatus=!1,this.$refs.simpleModalTkl.show({showConfirmButton:!1})):"quan"===e?this.getQuan():(this.copyTklStatus=!1,this.getTkl(e))},shopCartShares:function(t){"tklbuy"===t?(this.copyTklStatus=!1,this.getTkl(t)):"quan"===t&&this.getQuan()},TklmaskClose:function(t){this.$refs.simpleModalTkl.hide(),this.copyTklStatus=!1},copyTklWenAn:function(){var e=this;t.setClipboardData({data:"椱ァ製这段文字，打开【◇綯℡寳】即可领券购买。$"+this.tkl,success:function(t){e.copyTklStatus=!0}})},copyTklWenAns:function(){var e=this;this.$queue.getData("relation_id");t.setClipboardData({data:this.goods.itemtitle+"\n【在售价】"+this.goods.itemprice+"元\n【券后价】"+this.goods.itemendprice+"元\n【必买理由】\n"+this.goods.itemdesc+"+\n$"+this.tkl+"椱ァ製此信息进入【◇綯℡寳】即可查看并下单\n",success:function(t){e.copyTklStatus=!0}})},TklBuymaskClose:function(){this.$refs.simpleModalTklBuy.hide(),this.copyTklStatus=!1},hideQr:function(){this.qrShow=!1}}};e.default=i}).call(this,o("543d")["default"])},9391:function(t,e,o){"use strict";o.r(e);var a=o("2bed"),i=o("abd2");for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("148c");var n,u=o("f0c5"),l=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],n);e["default"]=l.exports},abd2:function(t,e,o){"use strict";o.r(e);var a=o("4195"),i=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},c94f:function(t,e,o){"use strict";(function(t){o("fd83");a(o("66fd"));var e=a(o("9391"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["c94f","common/runtime","common/vendor"]]]);