(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"303b":function(t,e,o){"use strict";var i=o("d423"),n=o.n(i);n.a},"3ccb":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={onShareAppMessage:function(t){return{title:"购物先领券，一年省一半",path:"/pages/index/index"}},data:function(){return{recentKeyword:[],tab:[{name:"热销",position:2,total:0,data:[]},{name:"综合",position:0,total:0,data:[]},{name:"最新",position:1,total:0,data:[]},{name:"价格",position:4,total:0,data:[]}],TabCur:0,scrollLeft:0,scrollTop:!1,placeholder:"搜索服务，如营销推广",couponlist:[],page:1,localKeyword:"orange-tyh-keyword",min_id:1,sort:2,tb_p:1,keywords:"",loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}},onLoad:function(e){t.showLoading({title:"加载中..."}),this.keywords=e.keywords,this.loadCouponList()},onPageScroll:function(t){this.scrollTop=t.scrollTop>200},methods:{clearInput:function(){this.keywords=""},tabSelect:function(e){this.TabCur=e.currentTarget.dataset.id,this.sort=this.tab[e.currentTarget.dataset.id].position,this.scrollLeft=60*(e.currentTarget.dataset.id-1),this.page=1,this.min_id=1,this.tb_p=1,t.showLoading({title:"加载中..."}),this.loadCouponList("Refresh")},topScrollTap:function(){t.pageScrollTo({scrollTop:0,duration:300})},deleteKeyword:function(){this.recentKeyword=[],this.$queue.remove(this.localKeyword)},loadCouponList:function(e){var o=this;this.loadingType=1,this.$Request.get("/supersearch/apikey/maxd/keyword/"+this.keywords+"/back/20/sort/"+this.sort+"/min_id/"+this.min_id+"/is_coupon/1/tb_p/"+this.tb_p).then((function(i){o.loadingType=0,1===i.code?(1===o.page&&(o.couponlist=[]),o.min_id=i.min_id,o.tb_p=i.tb_p,i.data.forEach((function(t){t.tkmoney=(t.itemendprice*(.01*t.tkrates)/2).toFixed(2),t.itemsale=t.itemsale>1e4?"已售 "+(t.itemsale/1e4).toFixed(1)+"万":"已售 "+t.itemsale,o.couponlist.push(t)}))):o.loadingType=2,t.hideLoading(),"Refresh"===e&&t.stopPullDownRefresh()}))},navigateBack:function(){t.navigateBack()},toGoodsInfo:function(e){var o=this.$queue.getData("relation_id");o?t.navigateTo({url:"/pages/detail/goodsinfo?itemid="+e+"&relation_id="+o}):t.navigateTo({url:"/pages/detail/goodsinfo?itemid="+e})},searchInput:function(t){this.keywords=t.detail.value},submitSearch:function(){var e=this.$queue.get(this.localKeyword);-1===JSON.stringify(e).indexOf(this.keywords)&&this.$queue.insert({key:this.localKeyword,value:{keyword:this.keywords},capacityNum:20}),t.showLoading({title:"加载中..."}),this.$queue.getSearchKeys(this.keywords)?(t.showToast({title:"输入内容带有非法关键字请重新输入",mask:!1,duration:1500,icon:"none"}),this.keywords=""):(this.page=1,this.min_id=1,this.tb_p=1,this.loadCouponList("Refresh"),this.topScrollTap())}},onReady:function(){this.loadCouponList()},onReachBottom:function(){this.page=this.page+1,this.loadCouponList()},onPullDownRefresh:function(){this.page=1,this.min_id=1,this.tb_p=1,this.loadCouponList("Refresh")}};e.default=o}).call(this,o("543d")["default"])},"4c54":function(t,e,o){"use strict";(function(t){o("fd83");i(o("66fd"));var e=i(o("7b17"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"4dfa":function(t,e,o){"use strict";o.r(e);var i=o("3ccb"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},"605c":function(t,e,o){"use strict";var i;o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"7b17":function(t,e,o){"use strict";o.r(e);var i=o("605c"),n=o("4dfa");for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);o("303b");var s,r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=c.exports},d423:function(t,e,o){}},[["4c54","common/runtime","common/vendor"]]]);